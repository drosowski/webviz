{"id":"9eef0f81-985b-45e6-bf1a-0a66348dbde7","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"7488bfb8-89df-459e-b36d-b0ef63486f0d","decisionRule":{"id":"SI01","parameters":[],"decisionLogic":"import com.intellivat.domain.masterdata.UnspscClass\nreturn ctx.ITEM_UNSPSC?.getClassification()?.getUnspscClass()?.equals(UnspscClass.MATERIAL)\n\n","question":"Is the item a material?","title":"Item is Material","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"ITEM_UNSPSC","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Item UNSPSC","queryPath":"getLine(#lineNumber).unspsc","type":"com.intellivat.domain.masterdata.Unspsc"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"07a2f5d1-c6e7-45bb-a88e-6e9b48e51823","decisionRule":{"id":"SI03","parameters":[{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"A","description":"UNSPSC classification type"}],"decisionLogic":"import com.intellivat.domain.masterdata.UnspscClass\n\ndef classification = ctx.ITEM_UNSPSC?.getClassification()\ndef isMaterial = classification?.getUnspscClass()?.equals(UnspscClass.MATERIAL)\ndef isType = classification?.getType().orElse(\"--\").equals(ctx.A) ?: false\nreturn isMaterial && isType\n\n","question":"Is the Item a Material of type <A>?","title":"Material Type","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"ITEM_UNSPSC","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Item UNSPSC","queryPath":"getLine(#lineNumber).unspsc","type":"com.intellivat.domain.masterdata.Unspsc"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"e2f5eafe-fb8c-4a86-aeb1-67ffe54fa544","subtreeName":"GOODS","id":"a99ad09f-cb71-4fe8-b9b4-9426dce70626"},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Only Materials of type Goods are supported.","id":"cbe886ca-e808-4e98-8c1c-db37a8b8eb9d"},"parameterValues":[{"@class":"com.intellivat.domain.rules.TextValue","value":"GOODS","displayName":"GOODS"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"568f5954-dd23-4e85-85c3-4f7d6e6e4b1e","decisionRule":{"id":"SI02","parameters":[],"decisionLogic":"import com.intellivat.domain.masterdata.UnspscClass\n\nreturn ctx.ITEM_UNSPSC?.getClassification()?.getUnspscClass()?.equals(UnspscClass.SERVICE)\n\n","question":"Is the item a service?","title":"Item is Service","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"ITEM_UNSPSC","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Item UNSPSC","queryPath":"getLine(#lineNumber).unspsc","type":"com.intellivat.domain.masterdata.Unspsc"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"90a787a5-3ee0-44fa-a316-5ebb92867837","decisionRule":{"id":"SI04","parameters":[{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"A","description":"UNSPSC classification type"}],"decisionLogic":"import com.intellivat.domain.masterdata.UnspscClass\n\ndef classification = ctx.ITEM_UNSPSC?.getClassification()\ndef isService = classification?.getUnspscClass()?.equals(UnspscClass.SERVICE) ?: false\ndef isType = classification?.getType().orElse(\"--\").equals(ctx.A) ?: false\nreturn isService && isType\n\n","question":"Is the Item a Service of type <A>?","title":"Service Type","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"ITEM_UNSPSC","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Item UNSPSC","queryPath":"getLine(#lineNumber).unspsc","type":"com.intellivat.domain.masterdata.Unspsc"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"a0edc39b-ef60-425d-a3fb-7f2f85ff0753","subtreeName":"FREIGHT","id":"21aee935-1d0e-4631-848e-8c467d0973c0"},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Only Services of type Freight are supported.","id":"127f5214-ca19-4797-9856-eabdfa56b2ca"},"parameterValues":[{"@class":"com.intellivat.domain.rules.TextValue","value":"FREIGHT","displayName":"FREIGHT"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Item has to be either a Material or Service!","id":"fd0e6735-a0bc-40bc-a14d-96f035aeb81b"},"parameterValues":[]},"parameterValues":[]},"subtrees":[{"id":"20dd49be-2f70-4351-8798-390874c5b5d6","name":"GOODS_InTransit","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"1c62f905-e683-4fc4-adef-30deff2002be","decisionRule":{"id":"SJ02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Jurisdiction\nimport com.intellivat.domain.masterdata.LocationLevel\n\ndef locationToCheck = ctx.A\nif (ctx.A.getLevel() == LocationLevel.STATE) {\n    parent = ctx.A.getParent()\n    if (parent.isPresent()) {\n        locationToCheck = parent.get()\n    } else {\n        // Error! Seeddata incomplete\n    }\n}\nList<Jurisdiction> jurisdictions = dataProvider.findJurisdictionsByLocation(locationToCheck, taxPoint, timeToken)\njurisdictions.any { it.taxType.masterdataKey() != 'NONE' }\n\n","question":"Does the jurisdiction of <A> country have a tax system?","title":"Country has tax system","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"4e049bb3-7fe5-4764-957c-22f2ab9259e9","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ZERO","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Geographical Area","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Geographical Area","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"5c34e858-8c6e-4ca9-979e-071bd1e07c3e","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_TAX","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Geographical Area","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":null,"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"a0edc39b-ef60-425d-a3fb-7f2f85ff0753","name":"FREIGHT","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"8f0d5fdc-c8c5-454a-8582-e6839ce695d4","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"39b7502d-ddf4-4d47-be91-0c3c74050567","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"7260eae0-aeef-465e-93c1-003ebb0212ab","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Domestic Freight tax logic has not been created yet.","id":"da8923e7-e3d6-478d-88b2-a363d1355784"},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Domestic Shipment in another country than Domestic transaction.","id":"8111d0b8-d68e-43ae-890d-1e91de33b7f2"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Non-domestic Shipment in Domestic transaction.","id":"6c5a48da-06ef-4b33-bd0e-86219f71d377"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"44807f50-f285-4585-9793-0b484fb8f2ae","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"571335bf-f81c-40ee-b2b4-14e63b1e8810","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Pre-carriage tax logic has not been created yet.","id":"2366cb46-66f2-4fc7-b59a-b59e5f4a8c6b"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"a57ad714-145f-4e92-bd61-f1f46ba26e97","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: On-carriage tax logic has not been created yet.","id":"d1c37cde-facc-4071-b83d-f006fba421f8"},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: \"Transit-carriage\" tax logic has not been created yet.","id":"0394100c-1e39-43d6-98d5-a32a504ebe0d"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Cross-border freight tax logic has not been created yet.","id":"06f1df31-f5a7-4c17-9f02-f2e74ee95c1f"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"e2f5eafe-fb8c-4a86-aeb1-67ffe54fa544","name":"GOODS","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"f4800069-2a62-498e-a5c2-36790075b688","decisionRule":{"id":"SC01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]}],"decisionLogic":"return ctx.A?.equals(ctx.B) ?: false\n","question":"Are <A> and <B> the same company?","title":"Compare Companies","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Functional Invoices are not supported yet.","id":"64110681-6a60-48d1-b529-59e13fd406a8"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"a0c41cc4-7069-4cd9-9e33-a62a11cb433a","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"761f1703-423c-49dd-bdce-27f953eca7ef","subtreeName":"GOODS_Domestic","id":"e87c57af-3f48-4e49-b556-50ed6ec8cb60"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"97a6e926-6222-4479-9d14-47fac36accc6","decisionRule":{"id":"SL04","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"C","description":"Location Group","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ESAF-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EEA","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NLAN-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR69-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FIAL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FROS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"}]}],"decisionLogic":"ctx.C.hasMember(ctx.A) && ctx.C.hasMember(ctx.B)\n","question":"Are <A> and <B> in <C>?","title":"Locations in Group","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"085d960f-917a-4bba-a4f2-e9f3a111b806","subtreeName":"GOODS_EU","id":"d7775b05-fab3-4234-88c8-1467778b534e"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"71364542-dc3e-42de-b685-36415b598f3f","decisionRule":{"id":"ET05","parameters":[],"decisionLogic":"return ctx.CHAIN_TRANSACTION?.isImported() ?: false\n","question":"Goods have been imported with a previous invoice?","title":"Imported Goods","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"CHAIN_TRANSACTION","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Chain Transaction","queryPath":"getLine(#lineNumber).transactionContext.chainTransaction","type":"com.intellivat.domain.invoice.ChainTransaction"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"b3c78c84-b334-4612-9355-c2a3052bc163","subtreeName":"GOODS_DomesticReceiver","id":"a2f869fa-8f07-487f-9e87-a6f5c0a1dbaa"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"dc36d231-6c2a-4641-963f-282fc8c18e5b","decisionRule":{"id":"ET07","parameters":[],"decisionLogic":"return ctx.CHAIN_TRANSACTION?.isImport() ?: false\n","question":"Goods will be imported with this invoice?","title":"Import of Goods","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"CHAIN_TRANSACTION","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Chain Transaction","queryPath":"getLine(#lineNumber).transactionContext.chainTransaction","type":"com.intellivat.domain.invoice.ChainTransaction"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"9a3bf6e7-2566-405e-8527-a8c2be868938","decisionRule":{"id":"ET06","parameters":[],"decisionLogic":"return ctx.CHAIN_TRANSACTION?.isExport() ?: false\n","question":"Goods will be exported with this invoice?","title":"Export of Goods","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"CHAIN_TRANSACTION","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Chain Transaction","queryPath":"getLine(#lineNumber).transactionContext.chainTransaction","type":"com.intellivat.domain.invoice.ChainTransaction"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"f19b527d-b911-4b8e-a84f-795e2eb1942e","subtreeName":"GOODS_ExportImport","id":"bee8720a-2fce-4c7b-b1a6-971fcb24cc39"},"noNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"83caa1e8-5e03-486c-8a1b-07cac5c605c4","subtreeName":"GOODS_ImportFromTransit","id":"56067da0-7a52-42f4-98f4-ce1cb5e50f8b"},"parameterValues":[]},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"e58a0370-73db-4b2e-8a5d-0ecd479fdb8d","decisionRule":{"id":"ET06","parameters":[],"decisionLogic":"return ctx.CHAIN_TRANSACTION?.isExport() ?: false\n","question":"Goods will be exported with this invoice?","title":"Export of Goods","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"CHAIN_TRANSACTION","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Chain Transaction","queryPath":"getLine(#lineNumber).transactionContext.chainTransaction","type":"com.intellivat.domain.invoice.ChainTransaction"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"fac02d31-aac4-48e1-92b7-ac132e0c0b38","subtreeName":"GOODS_ExportToTransit","id":"960ce99f-af02-4df5-a534-aef176003531"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"36800232-b043-47bc-a4a1-471b9cadf9f5","decisionRule":{"id":"ET04","parameters":[],"decisionLogic":"return ctx.CHAIN_TRANSACTION?.isExported() ?: false\n","question":"Goods have been exported with a previous invoice?","title":"Exported Goods","contextEntryList":[{"parameter":{"@class":"com.intellivat.domain.rules.SimpleParameter","name":"CHAIN_TRANSACTION","description":null},"parameterValue":{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Chain Transaction","queryPath":"getLine(#lineNumber).transactionContext.chainTransaction","type":"com.intellivat.domain.invoice.ChainTransaction"}}]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"20dd49be-2f70-4351-8798-390874c5b5d6","subtreeName":"GOODS_InTransit","id":"0c5f08e1-cd67-48e0-80d2-dd108804af21"},"noNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"2d49879c-c528-4085-97ba-7b674b983e14","subtreeName":"GOODS_DomesticSender","id":"480a2d35-dd33-4606-b1c3-8beeae3c6519"},"parameterValues":[]},"parameterValues":[]},"parameterValues":[]},"parameterValues":[]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"}]}},{"id":"fac02d31-aac4-48e1-92b7-ac132e0c0b38","name":"GOODS_ExportToTransit","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"42e91091-b5e0-49b6-bee7-4b8a257420a5","decisionRule":{"id":"SJ02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Jurisdiction\nimport com.intellivat.domain.masterdata.LocationLevel\n\ndef locationToCheck = ctx.A\nif (ctx.A.getLevel() == LocationLevel.STATE) {\n    parent = ctx.A.getParent()\n    if (parent.isPresent()) {\n        locationToCheck = parent.get()\n    } else {\n        // Error! Seeddata incomplete\n    }\n}\nList<Jurisdiction> jurisdictions = dataProvider.findJurisdictionsByLocation(locationToCheck, taxPoint, timeToken)\njurisdictions.any { it.taxType.masterdataKey() != 'NONE' }\n\n","question":"Does the jurisdiction of <A> country have a tax system?","title":"Country has tax system","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"7b589c6c-19dd-41cd-a6d6-5a28135a4d2e","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EXPORT_ZERO","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"bb619541-2b7a-4dcd-b902-57f76ef2cd22","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_TAX","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":null,"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Geographical Area","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"085d960f-917a-4bba-a4f2-e9f3a111b806","name":"GOODS_EU","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"ceb551ea-25e3-4c88-9e69-e04ccd38ac93","decisionRule":{"id":"SL04","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"C","description":"Location Group","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EEA","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ESAF-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NLAN-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR69-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FIAL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FROS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"}]}],"decisionLogic":"ctx.C.hasMember(ctx.A) && ctx.C.hasMember(ctx.B)\n","question":"Are <A> and <B> in <C>?","title":"Locations in Group","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"44ac5deb-20b5-456c-8b32-42045e941aab","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"761f1703-423c-49dd-bdce-27f953eca7ef","subtreeName":"GOODS_Domestic","id":"bd7f5be1-639c-46b3-b195-aaf3baa20d29"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"b4b5e114-ddcb-46fd-888c-476ee87bda46","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"6ec2a563-bdd5-49d4-aa72-43ab276c858c","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"9cf58ee9-daf1-403d-ad66-fc0d1ca08ebd","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"INTRACOMMUNITY","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"85a2adb1-f441-455c-a858-d961b1fff50d","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"2d49879c-c528-4085-97ba-7b674b983e14","subtreeName":"GOODS_DomesticSender","id":"8ee262fc-4158-4278-8705-49a437b4d71a"},"noNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"4bf2f8ef-e06d-4bf9-a477-86345052e9b3","subtreeName":"GOODS_EU_SimAB","id":"43037405-9182-4235-8cd7-9d0382ec50fa"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"aeadda6e-5852-41dc-bce0-864d36d3dfa8","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"b3c78c84-b334-4612-9355-c2a3052bc163","subtreeName":"GOODS_DomesticReceiver","id":"d4f70d88-a860-405b-92fb-6a7f8488658b"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"1a712f93-2bfd-438d-841e-21411bba52bc","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"eef4fa43-30d5-4627-9a4d-737d89943c4f","subtreeName":"GOODS_EU_SimBC","id":"adddaf6a-b308-40aa-ba01-191e03747ce0"},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: EU Sales between two non-local companies is not supported yet.","id":"5487bed0-56f2-4518-8b35-391d8895c9aa"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Non-EU transaction was routed in EU logic of the tax logic!","id":"bd62345e-d6e2-4d09-bafd-52ceef92e685"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"}]}},{"id":"f19b527d-b911-4b8e-a84f-795e2eb1942e","name":"GOODS_ExportImport","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"b565f9b5-4c44-4a46-967a-58986328d9ea","decisionRule":{"id":"SJ02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Jurisdiction\nimport com.intellivat.domain.masterdata.LocationLevel\n\ndef locationToCheck = ctx.A\nif (ctx.A.getLevel() == LocationLevel.STATE) {\n    parent = ctx.A.getParent()\n    if (parent.isPresent()) {\n        locationToCheck = parent.get()\n    } else {\n        // Error! Seeddata incomplete\n    }\n}\nList<Jurisdiction> jurisdictions = dataProvider.findJurisdictionsByLocation(locationToCheck, taxPoint, timeToken)\njurisdictions.any { it.taxType.masterdataKey() != 'NONE' }\n\n","question":"Does the jurisdiction of <A> country have a tax system?","title":"Country has tax system","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"6726bf4b-0c11-4413-80f0-4b8e40f4e1db","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EXPORT_ZERO","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"69f79d94-7908-454a-a4a3-04f25a9ee513","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_TAX","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":null,"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"761f1703-423c-49dd-bdce-27f953eca7ef","name":"GOODS_Domestic","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"4e2ad4a4-3778-46f2-999b-aef31e82b0fa","decisionRule":{"id":"SJ02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Jurisdiction\nimport com.intellivat.domain.masterdata.LocationLevel\n\ndef locationToCheck = ctx.A\nif (ctx.A.getLevel() == LocationLevel.STATE) {\n    parent = ctx.A.getParent()\n    if (parent.isPresent()) {\n        locationToCheck = parent.get()\n    } else {\n        // Error! Seeddata incomplete\n    }\n}\nList<Jurisdiction> jurisdictions = dataProvider.findJurisdictionsByLocation(locationToCheck, taxPoint, timeToken)\njurisdictions.any { it.taxType.masterdataKey() != 'NONE' }\n\n","question":"Does the jurisdiction of <A> country have a tax system?","title":"Country has tax system","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"570f0bc0-5d3f-4fe4-94c4-2ce3de98a5f2","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"532cb030-d14c-4bb0-9592-8664a2c19b6c","decisionRule":{"id":"SR01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Company\nimport com.intellivat.domain.masterdata.Location\n\nCompany paramA = ctx.A\nLocation paramB = ctx.B\n\ndef jurisdictions = dataProvider.findJurisdictionsByLocation(\n        paramB.getParent().orElse(paramB), taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    def taxRegJurisdictions = paramA.taxRegistrations*.jurisdiction\n    return jurisdiction in taxRegJurisdictions\n}\n\n","question":"Does the <A> have a tax registration in the Jurisdiction of the Country of <B>?","title":"Tax Registered in Country","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"e64d7fda-76dc-47e5-b974-d219af6288c0","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DOMESTIC","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Foreign VAT/GST is not supported yet.","id":"ae27068c-149a-4ffe-a433-6ac109bf3001"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"bef7ea47-e040-4823-81f0-6b7ea23cc673","decisionRule":{"id":"SR01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Company\nimport com.intellivat.domain.masterdata.Location\n\nCompany paramA = ctx.A\nLocation paramB = ctx.B\n\ndef jurisdictions = dataProvider.findJurisdictionsByLocation(\n        paramB.getParent().orElse(paramB), taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    def taxRegJurisdictions = paramA.taxRegistrations*.jurisdiction\n    return jurisdiction in taxRegJurisdictions\n}\n\n","question":"Does the <A> have a tax registration in the Jurisdiction of the Country of <B>?","title":"Tax Registered in Country","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"39b74f94-8c19-46a2-9d61-1602758f9198","decisionRule":{"id":"SR01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Company\nimport com.intellivat.domain.masterdata.Location\n\nCompany paramA = ctx.A\nLocation paramB = ctx.B\n\ndef jurisdictions = dataProvider.findJurisdictionsByLocation(\n        paramB.getParent().orElse(paramB), taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    def taxRegJurisdictions = paramA.taxRegistrations*.jurisdiction\n    return jurisdiction in taxRegJurisdictions\n}\n\n","question":"Does the <A> have a tax registration in the Jurisdiction of the Country of <B>?","title":"Tax Registered in Country","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"6856ea68-0f89-411d-8a89-c09e11a5b387","decisionRule":{"id":"SJ01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Attribute","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Zero-rated_Supply_to_Exporter","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Exporter_Rule","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Reverse_Charge","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU_like_Rules","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Use_and_Enjoyment_Rules","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Importer_Rule","type":"com.intellivat.domain.masterdata.NamedAttribute"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"def jurisdictions = dataProvider.findJurisdictionsByLocation(\n        ctx.B, taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    jurisdiction.activeAttributes*.name.contains(ctx.A.name)\n}\n\n","question":"Does <A> apply in the Jurisdiction of <B>?","title":"Rule applies in Jurisdiction","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"8130362e-7687-4e4b-91fe-b6181fc25af1","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"REV_CHARGE","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"39cd4104-574a-481a-92c5-f89ac463984e","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DOMESTIC","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Reverse_Charge","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Foreign VAT/GST and non local seller is not supported yet.","id":"3b5e0d31-5a07-4a24-b7bb-6af3b35f596b"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Non-local seller has no tax registration of the sender country.","id":"b74166e3-a082-43b8-9fb0-dd7f7d8229d8"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"c484c3d2-11ab-455f-892d-85ac5822669d","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_TAX","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":null,"buyerTaxRegJurisdiction":null},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"2d49879c-c528-4085-97ba-7b674b983e14","name":"GOODS_DomesticSender","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"43ec01f0-c1c9-477b-aa1f-ee28807ca619","decisionRule":{"id":"SJ02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Jurisdiction\nimport com.intellivat.domain.masterdata.LocationLevel\n\ndef locationToCheck = ctx.A\nif (ctx.A.getLevel() == LocationLevel.STATE) {\n    parent = ctx.A.getParent()\n    if (parent.isPresent()) {\n        locationToCheck = parent.get()\n    } else {\n        // Error! Seeddata incomplete\n    }\n}\nList<Jurisdiction> jurisdictions = dataProvider.findJurisdictionsByLocation(locationToCheck, taxPoint, timeToken)\njurisdictions.any { it.taxType.masterdataKey() != 'NONE' }\n\n","question":"Does the jurisdiction of <A> country have a tax system?","title":"Country has tax system","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"4d8ca3d2-75eb-4e6d-964f-37fdab3b4520","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"761f1703-423c-49dd-bdce-27f953eca7ef","subtreeName":"GOODS_Domestic","id":"bb437426-ea24-47d5-a0d9-52647f906fad"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"942929ac-9c57-49f0-8ceb-3081a0643566","decisionRule":{"id":"SJ01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Attribute","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Zero-rated_Supply_to_Exporter","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Exporter_Rule","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Reverse_Charge","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU_like_Rules","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Use_and_Enjoyment_Rules","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Importer_Rule","type":"com.intellivat.domain.masterdata.NamedAttribute"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"def jurisdictions = dataProvider.findJurisdictionsByLocation(\n        ctx.B, taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    jurisdiction.activeAttributes*.name.contains(ctx.A.name)\n}\n\n","question":"Does <A> apply in the Jurisdiction of <B>?","title":"Rule applies in Jurisdiction","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"21ff5ab6-6ec8-4049-a2ac-88b20e10f48f","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ZERO","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"761f1703-423c-49dd-bdce-27f953eca7ef","subtreeName":"GOODS_Domestic","id":"51387651-57c9-4061-8961-d42aaeb760ef"},"parameterValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Zero-rated_Supply_to_Exporter","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"27a6d255-79cf-4e81-a972-689801869444","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_TAX","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":null,"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"b3c78c84-b334-4612-9355-c2a3052bc163","name":"GOODS_DomesticReceiver","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"629b78cd-52a1-4dfd-94e4-62b2a645ecac","decisionRule":{"id":"SJ02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Jurisdiction\nimport com.intellivat.domain.masterdata.LocationLevel\n\ndef locationToCheck = ctx.A\nif (ctx.A.getLevel() == LocationLevel.STATE) {\n    parent = ctx.A.getParent()\n    if (parent.isPresent()) {\n        locationToCheck = parent.get()\n    } else {\n        // Error! Seeddata incomplete\n    }\n}\nList<Jurisdiction> jurisdictions = dataProvider.findJurisdictionsByLocation(locationToCheck, taxPoint, timeToken)\njurisdictions.any { it.taxType.masterdataKey() != 'NONE' }\n\n","question":"Does the jurisdiction of <A> country have a tax system?","title":"Country has tax system","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"7d3252f2-a810-4e20-97a8-5a19d2ae13a3","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"b2ce114a-5c7d-4641-86ab-bb1b25ea3cb7","decisionRule":{"id":"SR01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Company\nimport com.intellivat.domain.masterdata.Location\n\nCompany paramA = ctx.A\nLocation paramB = ctx.B\n\ndef jurisdictions = dataProvider.findJurisdictionsByLocation(\n        paramB.getParent().orElse(paramB), taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    def taxRegJurisdictions = paramA.taxRegistrations*.jurisdiction\n    return jurisdiction in taxRegJurisdictions\n}\n\n","question":"Does the <A> have a tax registration in the Jurisdiction of the Country of <B>?","title":"Tax Registered in Country","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"ffebdce9-7635-4854-ab24-0561e4ff6505","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DOMESTIC","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Foreign VAT/GST is not supported yet.","id":"dbfd3b19-751a-4bdd-a6e4-78e94f340f5e"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"1bfb468d-ad70-4ba2-8dde-ff90d7b5bc4b","decisionRule":{"id":"SR01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Company\nimport com.intellivat.domain.masterdata.Location\n\nCompany paramA = ctx.A\nLocation paramB = ctx.B\n\ndef jurisdictions = dataProvider.findJurisdictionsByLocation(\n        paramB.getParent().orElse(paramB), taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    def taxRegJurisdictions = paramA.taxRegistrations*.jurisdiction\n    return jurisdiction in taxRegJurisdictions\n}\n\n","question":"Does the <A> have a tax registration in the Jurisdiction of the Country of <B>?","title":"Tax Registered in Country","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"6772f715-6554-4131-b8d6-246eafdee4df","decisionRule":{"id":"SR01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Company\nimport com.intellivat.domain.masterdata.Location\n\nCompany paramA = ctx.A\nLocation paramB = ctx.B\n\ndef jurisdictions = dataProvider.findJurisdictionsByLocation(\n        paramB.getParent().orElse(paramB), taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    def taxRegJurisdictions = paramA.taxRegistrations*.jurisdiction\n    return jurisdiction in taxRegJurisdictions\n}\n\n","question":"Does the <A> have a tax registration in the Jurisdiction of the Country of <B>?","title":"Tax Registered in Country","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"168faed1-2a42-4a56-9695-177e3623ad8f","decisionRule":{"id":"SJ01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Attribute","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Zero-rated_Supply_to_Exporter","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Exporter_Rule","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Reverse_Charge","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU_like_Rules","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Use_and_Enjoyment_Rules","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Importer_Rule","type":"com.intellivat.domain.masterdata.NamedAttribute"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"def jurisdictions = dataProvider.findJurisdictionsByLocation(\n        ctx.B, taxPoint, timeToken)\njurisdictions.any { jurisdiction ->\n    jurisdiction.activeAttributes*.name.contains(ctx.A.name)\n}\n\n","question":"Does <A> apply in the Jurisdiction of <B>?","title":"Rule applies in Jurisdiction","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"e04a7bb1-76ef-4ac3-9480-ab1af938b44c","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"REV_CHARGE","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"1d95ba09-b0bf-484d-94af-e0a9ce3de7c6","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DOMESTIC","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"Reverse_Charge","type":"com.intellivat.domain.masterdata.NamedAttribute"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Foreign VAT/GST and non-local seller is not supported yet.","id":"702e5eb6-bcee-4df8-9ec8-a20413f60113"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Seller needs a tax registration of Receiver Country.","id":"73dab9a4-12d4-4afe-bc74-be1f8063bb2d"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"f049caf3-cfc7-4bd2-8644-c6dd2ae2f18b","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_TAX","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":null,"buyerTaxRegJurisdiction":null}}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"4bf2f8ef-e06d-4bf9-a477-86345052e9b3","name":"GOODS_EU_SimAB","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"db76b477-0247-4033-b7eb-6cb8a49022ba","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Domestic transaction routed in EU triangulation!","id":"3076d182-7c3a-4dcc-9873-688e54399d34"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"e2ff3584-c75d-45fe-b902-3eb32c2e9447","decisionRule":{"id":"SL04","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"C","description":"Location Group","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EEA","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ESAF-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NLAN-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR69-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FIAL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FROS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"}]}],"decisionLogic":"ctx.C.hasMember(ctx.A) && ctx.C.hasMember(ctx.B)\n","question":"Are <A> and <B> in <C>?","title":"Locations in Group","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"5915e623-2db9-4856-be43-cdca4fa301ba","decisionRule":{"id":"SC02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_WSR","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PL_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CA_EXP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS_IMP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"RO_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HK_WSR","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BG_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CN_SUP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DK_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IS_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PT_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_IMP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CZ_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AU_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BG_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ESGC_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GB_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"MT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CY_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DK_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HR_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LU_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IS_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GB_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SI_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CZ_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HK_WHS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CA_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AU_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LV_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_WHS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SK_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"MT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HU_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CY_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HR_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PL_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LU_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AU_IMP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CN_EXP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DE_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_WHB","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SI_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GB_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"RO_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LV_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SK_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HU_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS_RET","type":"com.intellivat.domain.masterdata.Company"}]}],"decisionLogic":"package rules\n\nreturn ctx.A?.equals(ctx.B) ?: false\n","question":"Is the <A> company <B>?","title":"Identify Company","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"7f5ea4e8-b1d8-4825-be73-dca3f38bad5d","decisionRule":{"id":"SL02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-AW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-ML","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-BC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-MB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-RE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-BQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-QC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-SX","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-GC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-AB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-US-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-PE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-CE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FI-AL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-CW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-BL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-TF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-GR-69","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GP","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-MD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-ON","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LV","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-US","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-EE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-MT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-ES","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-VA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-RO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-JE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SM","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CH","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CN","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CY","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CZ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PT","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.B.hasMember(ctx.A)\n","question":"Is <A> in <B>?","title":"Identify Location","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"2d49879c-c528-4085-97ba-7b674b983e14","subtreeName":"GOODS_DomesticSender","id":"52bc28da-ca8b-4eb7-a889-0e8efaa4bd31"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"bca5780e-d330-4f71-91f5-da92878771c1","decisionRule":{"id":"SL02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-AW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-ML","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-BC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-MB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-RE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-BQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-QC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-SX","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-GC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-AB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-US-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-PE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-CE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FI-AL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-CW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-BL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-TF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-GR-69","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GP","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-MD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-ON","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LV","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-US","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-EE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-MT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-ES","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-VA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-RO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-JE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SM","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CH","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CN","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CY","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CZ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PT","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.B.hasMember(ctx.A)\n","question":"Is <A> in <B>?","title":"Identify Location","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"10d5dcfe-1282-4a88-b037-4a5e7e812232","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"INTRACOMMUNITY","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"9cc27615-5b01-4820-b1c9-0ce4c2bb05e5","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU_ZERO_SIM","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Triangulation is not possible with current buyer.","id":"f18e597c-a188-416c-b065-445c6571d4ef"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_DST","type":"com.intellivat.domain.masterdata.Company"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Non-EU transaction routed in EU triangulation!","id":"dfcdc1f1-93e2-4992-b5f8-8d0e4595c886"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"83caa1e8-5e03-486c-8a1b-07cac5c605c4","name":"GOODS_ImportFromTransit","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"a83a9e03-bfd8-48e9-aef1-6f5b5fdfba08","decisionRule":{"id":"SJ02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"import com.intellivat.domain.masterdata.Jurisdiction\nimport com.intellivat.domain.masterdata.LocationLevel\n\ndef locationToCheck = ctx.A\nif (ctx.A.getLevel() == LocationLevel.STATE) {\n    parent = ctx.A.getParent()\n    if (parent.isPresent()) {\n        locationToCheck = parent.get()\n    } else {\n        // Error! Seeddata incomplete\n    }\n}\nList<Jurisdiction> jurisdictions = dataProvider.findJurisdictionsByLocation(locationToCheck, taxPoint, timeToken)\njurisdictions.any { it.taxType.masterdataKey() != 'NONE' }\n\n","question":"Does the jurisdiction of <A> country have a tax system?","title":"Country has tax system","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"d785a747-202e-4d26-bf0c-3f5c9fbba0e9","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ZERO","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Geographical Area","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Geographical Area","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"a646673f-c35a-494b-9f7c-18933f2f85d6","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_TAX","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Geographical Area","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":null,"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"}]}},{"id":"eef4fa43-30d5-4627-9a4d-737d89943c4f","name":"GOODS_EU_SimBC","rootNode":{"@class":"com.intellivat.domain.taxtree.RootNode","id":"0486b4df-db77-490e-83d9-3f673b03401e","decisionRule":{"id":"SL01","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.A.parent.orElse(ctx.A) == ctx.B.parent.orElse(ctx.B)","question":"Are <A> and <B> in the same Country?","title":"Compare Countries","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Domestic transaction routed in EU triangulation!","id":"7d7ae448-cefd-41bb-b01e-6077346d3b7f"},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"5be16e28-b1c6-4e9c-b978-cc1646e2ae29","decisionRule":{"id":"SL04","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"C","description":"Location Group","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EEA","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ESAF-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NLAN-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR69-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FIAL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FROS-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES-GROUP","type":"com.intellivat.domain.masterdata.NamedGroup"}]}],"decisionLogic":"ctx.C.hasMember(ctx.A) && ctx.C.hasMember(ctx.B)\n","question":"Are <A> and <B> in <C>?","title":"Locations in Group","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"458e1a3b-04dd-4d92-80ae-2abb7e697eab","decisionRule":{"id":"SC02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer","queryPath":"header.buyer","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Company ID","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_WSR","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PL_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CA_EXP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS_IMP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"RO_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HK_WSR","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BG_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CN_SUP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DK_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FI_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IS_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PT_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_IMP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CZ_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"FR_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AU_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BG_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ESGC_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GB_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"MT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NO_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"BE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CY_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DK_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HR_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LU_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IS_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GB_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SI_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CZ_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HK_WHS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CA_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IT_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AU_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LV_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_WHS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EE_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SK_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"MT_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HU_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CY_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HR_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"PL_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LU_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"AU_IMP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CN_EXP","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"DE_DST","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_WHB","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SI_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GB_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"ES_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"RO_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"IE_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"LV_CUS","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"NL_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"GR_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"SK_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"HU_RET","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CIS_RET","type":"com.intellivat.domain.masterdata.Company"}]}],"decisionLogic":"package rules\n\nreturn ctx.A?.equals(ctx.B) ?: false\n","question":"Is the <A> company <B>?","title":"Identify Company","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"c31c1a79-2aef-4d70-bdfe-e21bcfcd1191","decisionRule":{"id":"SL02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-AW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-ML","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-BC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-MB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-RE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-BQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-QC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-SX","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-GC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-AB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-US-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-PE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-CE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FI-AL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-CW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-BL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-TF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-GR-69","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GP","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-MD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-ON","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LV","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-US","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-EE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-MT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-ES","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-VA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-RO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-JE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SM","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CH","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CN","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CY","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CZ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PT","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.B.hasMember(ctx.A)\n","question":"Is <A> in <B>?","title":"Identify Location","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"46fad19d-086d-4b7b-84d8-93481f292d27","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"INTRACOMMUNITY","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Sender Geographical Area","queryPath":"header.transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"noNode":{"@class":"com.intellivat.domain.taxtree.SimpleDecisionNode","id":"1d05889a-ad43-4d23-a1fc-1f09284ff3ce","decisionRule":{"id":"SL02","parameters":[{"@class":"com.intellivat.domain.rules.SelectParameter","name":"A","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Provider Location","queryPath":"getLine(#lineNumber).transactionContext.serviceProviderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Buyer Location","queryPath":"header.buyer.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller Location","queryPath":"header.seller.address","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Service Rendered Location","queryPath":"getLine(#lineNumber).transactionContext.serviceRenderedArea","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship From Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipFrom","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Ship To Location","queryPath":"getLine(#lineNumber).transactionContext.shipment.shipTo","type":"com.intellivat.domain.masterdata.Location"}]},{"@class":"com.intellivat.domain.rules.SelectParameter","name":"B","description":"Location","allowedValues":[{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-AW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-ML","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-BC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-MB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-RE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-BQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-QC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-SX","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-GC","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-MQ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-YT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-AB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-US-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-PE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-CE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FI-AL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-NL-CW","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-BL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-TF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-GR-69","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GP","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-ES-MD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-CA-ON","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"STATE-FR-GF","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LV","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-US","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-EE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-MT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AD","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-ES","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IS","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-VA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-IT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-AU","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-RO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-JE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-BE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FO","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-FR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CA","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GG","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-SM","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GB","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CH","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CN","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-GR","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CY","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-CZ","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LI","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PL","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-LT","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-DE","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-HK","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-PT","type":"com.intellivat.domain.masterdata.Location"}]}],"decisionLogic":"ctx.B.hasMember(ctx.A)\n","question":"Is <A> in <B>?","title":"Identify Location","contextEntryList":[]},"yesNode":{"@class":"com.intellivat.domain.taxtree.SubtreeBookmark","subtreeId":"b3c78c84-b334-4612-9355-c2a3052bc163","subtreeName":"GOODS_DomesticReceiver","id":"7d9b7d65-52cd-43a4-9564-3a96f3ff9062"},"noNode":{"@class":"com.intellivat.domain.taxtree.ResultNode","id":"d51b2a03-5bcc-40fb-8011-23a00fc2042a","results":{"COUNTRY":{"taxIndicatorReference":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU_RC_SIM","type":"com.intellivat.domain.masterdata.TaxIndicator"},"sellerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"},"buyerJurisdictionReferenceLocation":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},"sellerTaxRegJurisdiction":{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"},"buyerTaxRegJurisdiction":{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Receiver Geographical Area","queryPath":"header.transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}},"STATE":null}},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"COUNTRY-NL","type":"com.intellivat.domain.masterdata.Location"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"NOT SUPPORTED: Triangulation is not possible with current seller.","id":"462964db-d267-4941-996a-7e14536a5caa"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticInvoiceReference","displayName":"Seller","queryPath":"header.seller","type":"com.intellivat.domain.masterdata.Company"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"CH_DST","type":"com.intellivat.domain.masterdata.Company"}]},"noNode":{"@class":"com.intellivat.domain.taxtree.ExceptionNode","type":"ERROR: Non-EU transaction routed in EU triangulation!","id":"9235322e-d090-4bb9-bade-42087d9848e6"},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.masterdata.MasterdataReference","masterdataId":"EU","type":"com.intellivat.domain.masterdata.NamedGroup"}]},"parameterValues":[{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Sender Location","queryPath":"getLine(#lineNumber).transactionContext.senderLocation","type":"com.intellivat.domain.masterdata.Location"},{"@class":"com.intellivat.domain.invoice.StaticLineReference","displayName":"Receiver Location","queryPath":"getLine(#lineNumber).transactionContext.receiverLocation","type":"com.intellivat.domain.masterdata.Location"}]}}]}